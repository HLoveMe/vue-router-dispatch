!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("vue-router"),require("rxjs"),require("vue")):"function"==typeof define&&define.amd?define(["vue-router","rxjs","vue"],r):"object"==typeof exports?exports.Pin=r(require("vue-router"),require("rxjs"),require("vue")):e.Pin=r(e["vue-router"],e.rxjs,e.vue)}(self,((e,r,t)=>(()=>{"use strict";var n={832:e=>{e.exports=r},748:e=>{e.exports=t},557:r=>{r.exports=e}},o={};function i(e){var r=o[e];if(void 0!==r)return r.exports;var t=o[e]={exports:{}};return n[e](t,t.exports,i),t.exports}i.d=(e,r)=>{for(var t in r)i.o(r,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},i.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var u={};return(()=>{i.r(u),i.d(u,{VueRouterPin:()=>ye,dispatchEvent:()=>xe,useRoutePin:()=>de,useRouterPin:()=>me});var e=i(557),r=i(832);function t(){}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,o=e=>n?Symbol.for("[r-server]: "+e):"[r-server]: "+e,c=o("event-init"),a=o("GlobalRServerKey"),l=o("CurrentRServerKey"),s=new Map,f={type:c,data:null,reject:t,resolve:t,source:void 0},p={id:"",channelCenter:new r.BehaviorSubject(f),errorChanel:new r.Subject,children:[],clearSubs:[]},h={id:a,router:void 0,children:[],channelCenter:new r.BehaviorSubject(f),errorChanel:new r.Subject,clearSubs:[]},v=()=>{console.error("please install vue-router-pin")},y={on:v,onBehavior:v,once:v,onError:v,dispatch:v,dispatchAsync:v},b=function(e,r){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])},b(e,r)};function d(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function t(){this.constructor=e}b(e,r),e.prototype=null===r?Object.create(r):(t.prototype=r.prototype,new t)}function m(e){var r="function"==typeof Symbol&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function x(e,r){var t="function"==typeof Symbol&&e[Symbol.iterator];if(!t)return e;var n,o,i=t.call(e),u=[];try{for(;(void 0===r||r-- >0)&&!(n=i.next()).done;)u.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return u}function g(e,r,t){if(t||2===arguments.length)for(var n,o=0,i=r.length;o<i;o++)!n&&o in r||(n||(n=Array.prototype.slice.call(r,0,o)),n[o]=r[o]);return e.concat(n||Array.prototype.slice.call(r))}function w(e){return"function"==typeof e}Object.create,Object.create;var j,_=((j=function(e){return function(r){e(this),this.message=r?r.length+" errors occurred during unsubscription:\n"+r.map((function(e,r){return r+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=r}}((function(e){Error.call(e),e.stack=(new Error).stack}))).prototype=Object.create(Error.prototype),j.prototype.constructor=j,j);function S(e,r){if(e){var t=e.indexOf(r);0<=t&&e.splice(t,1)}}var O=function(){function e(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var e,r,t,n,o;if(!this.closed){this.closed=!0;var i=this._parentage;if(i)if(this._parentage=null,Array.isArray(i))try{for(var u=m(i),c=u.next();!c.done;c=u.next())c.value.remove(this)}catch(r){e={error:r}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}else i.remove(this);var a=this.initialTeardown;if(w(a))try{a()}catch(e){o=e instanceof _?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var s=m(l),f=s.next();!f.done;f=s.next()){var p=f.value;try{T(p)}catch(e){o=null!=o?o:[],e instanceof _?o=g(g([],x(o)),x(e.errors)):o.push(e)}}}catch(e){t={error:e}}finally{try{f&&!f.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}if(o)throw new _(o)}},e.prototype.add=function(r){var t;if(r&&r!==this)if(this.closed)T(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(r)}},e.prototype._hasParent=function(e){var r=this._parentage;return r===e||Array.isArray(r)&&r.includes(e)},e.prototype._addParent=function(e){var r=this._parentage;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e},e.prototype._removeParent=function(e){var r=this._parentage;r===e?this._parentage=null:Array.isArray(r)&&S(r,e)},e.prototype.remove=function(r){var t=this._finalizers;t&&S(t,r),r instanceof e&&r._removeParent(this)},e.EMPTY=((r=new e).closed=!0,r),e;var r}();function P(e){return e instanceof O||e&&"closed"in e&&w(e.remove)&&w(e.add)&&w(e.unsubscribe)}function T(e){w(e)?e():e.unsubscribe()}O.EMPTY;var C=null,E=null,A=void 0,R=!1,z=!1,q={setTimeout:function(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var o=q.delegate;return(null==o?void 0:o.setTimeout)?o.setTimeout.apply(o,g([e,r],x(t))):setTimeout.apply(void 0,g([e,r],x(t)))},clearTimeout:function(e){var r=q.delegate;return((null==r?void 0:r.clearTimeout)||clearTimeout)(e)},delegate:void 0};function B(){}var k=M("C",void 0,void 0);function M(e,r,t){return{kind:e,value:r,error:t}}var U=null,D=function(e){function r(r){var t=e.call(this)||this;return t.isStopped=!1,r?(t.destination=r,P(r)&&r.add(t)):t.destination=V,t}return d(r,e),r.create=function(e,r,t){return new $(e,r,t)},r.prototype.next=function(e){this.isStopped?N(function(e){return M("N",e,void 0)}(e),this):this._next(e)},r.prototype.error=function(e){this.isStopped?N(M("E",void 0,e),this):(this.isStopped=!0,this._error(e))},r.prototype.complete=function(){this.isStopped?N(k,this):(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(e){this.destination.next(e)},r.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(O),F=Function.prototype.bind;function K(e,r){return F.call(e,r)}var Y=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var r=this.partialObserver;if(r.next)try{r.next(e)}catch(e){G(e)}},e.prototype.error=function(e){var r=this.partialObserver;if(r.error)try{r.error(e)}catch(e){G(e)}else G(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){G(e)}},e}(),$=function(e){function r(r,t,n){var o,i,u=e.call(this)||this;return w(r)||!r?o={next:null!=r?r:void 0,error:null!=t?t:void 0,complete:null!=n?n:void 0}:u&&z?((i=Object.create(r)).unsubscribe=function(){return u.unsubscribe()},o={next:r.next&&K(r.next,i),error:r.error&&K(r.error,i),complete:r.complete&&K(r.complete,i)}):o=r,u.destination=new Y(o),u}return d(r,e),r}(D);function G(e){var r;R?(r=e,R&&U&&(U.errorThrown=!0,U.error=r)):function(e){q.setTimeout((function(){if(!C)throw e;C(e)}))}(e)}function N(e,r){var t=E;t&&q.setTimeout((function(){return t(e,r)}))}var V={closed:!0,next:B,error:function(e){throw e},complete:B},H="function"==typeof Symbol&&Symbol.observable||"@@observable";function I(e){return e}function J(e){return 0===e.length?I:1===e.length?e[0]:function(r){return e.reduce((function(e,r){return r(e)}),r)}}var L=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(e,r,t){var n,o=this,i=(n=e)&&n instanceof D||function(e){return e&&w(e.next)&&w(e.error)&&w(e.complete)}(n)&&P(n)?e:new $(e,r,t);return function(e){if(R){var r=!U;if(r&&(U={errorThrown:!1,error:null}),e(),r){var t=U,n=t.errorThrown,o=t.error;if(U=null,n)throw o}}else e()}((function(){var e=o,r=e.operator,t=e.source;i.add(r?r.call(i,t):t?o._subscribe(i):o._trySubscribe(i))})),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(r){e.error(r)}},e.prototype.forEach=function(e,r){var t=this;return new(r=Q(r))((function(r,n){var o=new $({next:function(r){try{e(r)}catch(e){n(e),o.unsubscribe()}},error:n,complete:r});t.subscribe(o)}))},e.prototype._subscribe=function(e){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(e)},e.prototype[H]=function(){return this},e.prototype.pipe=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return J(e)(this)},e.prototype.toPromise=function(e){var r=this;return new(e=Q(e))((function(e,t){var n;r.subscribe((function(e){return n=e}),(function(e){return t(e)}),(function(){return e(n)}))}))},e.create=function(r){return new e(r)},e}();function Q(e){var r;return null!==(r=null!=e?e:A)&&void 0!==r?r:Promise}var W=new L((function(e){return e.complete()}));function X(e){return function(r){if(function(e){return w(null==e?void 0:e.lift)}(r))return r.lift((function(r){try{return e(r,this)}catch(e){this.error(e)}}));throw new TypeError("Unable to lift unknown Observable type")}}function Z(e,r,t,n,o){return new ee(e,r,t,n,o)}var ee=function(e){function r(r,t,n,o,i,u){var c=e.call(this,r)||this;return c.onFinalize=i,c.shouldUnsubscribe=u,c._next=t?function(e){try{t(e)}catch(e){r.error(e)}}:e.prototype._next,c._error=o?function(e){try{o(e)}catch(e){r.error(e)}finally{this.unsubscribe()}}:e.prototype._error,c._complete=n?function(){try{n()}catch(e){r.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,c}return d(r,e),r.prototype.unsubscribe=function(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var t=this.closed;e.prototype.unsubscribe.call(this),!t&&(null===(r=this.onFinalize)||void 0===r||r.call(this))}},r}(D);function re(e){return e<=0?function(){return W}:X((function(r,t){var n=[];r.subscribe(Z(t,(function(r){n.push(r),e<n.length&&n.shift()}),(function(){var e,r;try{for(var o=m(n),i=o.next();!i.done;i=o.next()){var u=i.value;t.next(u)}}catch(r){e={error:r}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(e)throw e.error}}t.complete()}),void 0,(function(){n=null})))}))}function te(e,r){return X((function(t,n){var o=0;t.subscribe(Z(n,(function(t){return e.call(r,t,o++)&&n.next(t)})))}))}function ne(e,r){return void 0===r&&(r=null),r=null!=r?r:e,X((function(t,n){var o=[],i=0;t.subscribe(Z(n,(function(t){var u,c,a,l,s=null;i++%r==0&&o.push([]);try{for(var f=m(o),p=f.next();!p.done;p=f.next())(y=p.value).push(t),e<=y.length&&(s=null!=s?s:[]).push(y)}catch(e){u={error:e}}finally{try{p&&!p.done&&(c=f.return)&&c.call(f)}finally{if(u)throw u.error}}if(s)try{for(var h=m(s),v=h.next();!v.done;v=h.next()){var y=v.value;S(o,y),n.next(y)}}catch(e){a={error:e}}finally{try{v&&!v.done&&(l=h.return)&&l.call(h)}finally{if(a)throw a.error}}}),(function(){var e,r;try{for(var t=m(o),i=t.next();!i.done;i=t.next()){var u=i.value;n.next(u)}}catch(r){e={error:r}}finally{try{i&&!i.done&&(r=t.return)&&r.call(t)}finally{if(e)throw e.error}}n.complete()}),void 0,(function(){o=null})))}))}function oe(e,r){return X((function(t,n){var o=0;t.subscribe(Z(n,(function(t){n.next(e.call(r,t,o++))})))}))}var ie=i(748);function ue(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ce(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ue(Object(t),!0).forEach((function(r){ae(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ue(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function ae(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var le=e=>{var t={},{fullPath:n}=e,i=o(n),u=s.get(i);return u?t=u:(t.id=o(e.fullPath),t.route=e,t.children=[],t.clearSubs=[],t.channelCenter=new r.BehaviorSubject(f)),t},se=(e,r)=>r instanceof RegExp?"string"==typeof e.type&&r.test(e.type):e.type===r,fe=(0,ie.shallowRef)(p);function pe(e,r){r.unsubscribe();var t=e.clearSubs.indexOf(r);t>-1&&(e.clearSubs=e.clearSubs.splice(t,1))}function he(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{channelCenter:o,id:i,errorChanel:u}=e,c=i===a;if(!1===n)return o.next(t),void(c&&e.children.forEach((e=>e.channelCenter.next(t))));var{resolve:l,reject:s}=t,f=(0,r.from)(new Promise(((e,r)=>{o.next(ce(ce({},t),{},{resolve:e,reject:r}))}))),p=e.children.map((e=>(0,r.from)(new Promise(((r,n)=>{e.channelCenter.next(ce(ce({},t),{},{resolve:r,reject:n}))})))));(0,r.zip)(f,...p).pipe(re(1)).subscribe({next:e=>l(e),complete:()=>{},error:e=>{s(e),u.next(e)}})}var ve=(e,r)=>{var t=h.router,n=r=>{if(0==!!r)return e;if(e.id!==a)return e;var{fullPath:n}=t.resolve(r),i=o(n);return s.get(i)||e};return{dispatch:(e,t,o)=>{he(n(o),{type:e,data:t,source:r,resolve:()=>{},reject:()=>{}})},dispatchAsync:(e,t,o)=>new Promise(((i,u)=>{he(n(o),{type:e,data:t,source:r,resolve:e=>i(e),reject:e=>u(e)},!0)})),on:(r,t)=>function(e,r,t){var{channelCenter:n,errorChanel:o}=e,i=n.pipe(te((e=>se(e,r)||e.type===c)),ne(2,1),oe((e=>e[1]))).subscribe({complete:()=>pe(e,i),next:e=>t&&t(e),error:e=>o.next(e)});return e.clearSubs.push(i),{close:()=>pe(e,i)}}(e,r,t),onBehavior:(r,t)=>function(e,r,t){var{channelCenter:n,errorChanel:o}=e,i=n.pipe(te((e=>se(e,r)&&e.type!==c))).subscribe({complete:()=>pe(e,i),next:e=>t&&t(e),error:e=>o.next(e)});return e.clearSubs.push(i),{close:()=>pe(e,i)}}(e,r,t),once:(r,t)=>function(e,r,t){var{channelCenter:n,errorChanel:o}=e,i=n.pipe(te((e=>se(e,r)||e.type===c)),ne(2,1),oe((e=>e[1])),X((function(e,r){var t=0;e.subscribe(Z(r,(function(e){++t<=1&&(r.next(e),1<=t&&r.complete())})))}))).subscribe({complete:()=>pe(e,i),next:e=>t&&t(e),error:e=>o.next(e)});return e.clearSubs.push(i),{close:()=>pe(e,i)}}(e,r,t),onError:r=>{!function(e,r){var{errorChanel:t}=e,n=t.subscribe({complete:()=>{pe(e,n)},next:e=>{r&&r(e)}});e.clearSubs.push(n)}(e,r)}}};const ye=(be={install(t){var n;(n=t.config.globalProperties.$router).beforeEach(((e,r)=>{var t=le(e);s.has(t.id)||h.children.push(t),s.set(t.id,t),fe.value=t})),n.afterEach(((e,r)=>{fe.value=le(e)})),h.channelCenter=new r.BehaviorSubject(f),h.router=n,s.set(h.id,h),fe.value=h,t.provide(a,h),t.provide(l,fe),t.config.globalProperties.$rs=(r,t)=>{he(fe.value,{type:r,data:t,source:(0,e.useRoute)(),resolve:()=>{},reject:()=>{}})}},dispatch:function(e,r){var n=!1,i=void 0;2==(arguments.length<=2?0:arguments.length-2)?(n=arguments.length<=2?void 0:arguments[2],i=arguments.length<=3?void 0:arguments[3]):1==(arguments.length<=2?0:arguments.length-2)&&("boolean"==typeof(arguments.length<=2?void 0:arguments[2])?(n=arguments.length<=2?void 0:arguments[2],i=void 0):(i=arguments.length<=2?void 0:arguments[2],n=!1));var u=void 0;if(0==!!i&&(u=h),i===h.router)u=h;else{var c=h.router,{fullPath:a}=c.resolve(i),l=o(a);u=s.get(l)}return new Promise(((o,i)=>{he(u,{type:e,data:r,source:void 0,resolve:n?o:t,reject:n?i:t},!!n),n||o(null)}))}},be);var be;function de(){var r=(0,ie.inject)(l);return r?ve(r.value,(0,e.useRoute)()):y}function me(){var r=(0,ie.inject)(a);return r?ve(r,(0,e.useRouter)()):y}function xe(e,r,t,n){return ye.dispatch(e,r,t,n)}})(),u})()));